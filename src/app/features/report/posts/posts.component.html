<app-title title="Activity Report" [uppercase]="true"></app-title>

<div class="row">
  <div class="col-12">
    <div class="d-flex align-items-center flex-row">
      <div>
        <a class="btn btn-outline-primary me-1" [routerLink]="['post', 'new']">
          <fa-icon [icon]="['fas', 'plus']"></fa-icon>
        </a>
      </div>

      <input
        type="search"
        [(ngModel)]="searchInput"
        (ngModelChange)="search(null)"
        placeholder="Search"
        aria-label="Search"
        class="form-control"
      />
    </div>
    <hr />
    <ng-container *ngIf="tags">
      <label class="fw-bold">Filter by tag</label>
      <div class="d-block mt-1 mb-1">
        <span
          role="button"
          class="badge p-1 fs-6 mt-1 me-1 mb-1"
          (click)="search(t)"
          [class.bg-success]="selectedTag !== t"
          [class.bg-warning]="selectedTag === t"
          *ngFor="let t of tags"
          >#{{ t }}</span
        >
      </div>
    </ng-container>
  </div>
  <hr />
  <div class="col-12">
    <ng-container *ngIf="posts && posts.page.size > 0">
      <table class="table table-bordered">
        <tbody>
          <tr *ngFor="let n of posts.content">
            <td class="text-break">
              <div class="d-flex justify-content-between">
                <a
                  class="btn btn-link text-decoration-none fw-bold p-0 m-0"
                  [routerLink]="['post', slugify(n.title), n.id]"
                  ><fa-icon *ngIf="n.status ==='DONE'" [icon]="['fas', 'check-circle']" class="text-success me-1"></fa-icon
                  >{{ n.title | titlecase }}</a
                >
                <small class="text-muted">
                  {{ n.updatedDate | date: 'dd/MM/yyyy' }}
<span class="d-lg-inline-block d-none" *ngIf="n.status === 'IN_PROGRESS'"> â³</span>
<span class="d-lg-inline-block d-none" *ngIf="n.status === 'PENDING'"> ğŸ•—</span>
<span class="d-lg-inline-block d-none" *ngIf="n.status === 'DONE'"> âœ…</span>
                </small>
              </div>

              <p class="mb-1">{{ n.description }}</p>
            </td>
            <td class="fit">
              <div class="d-inline-block">
                <button
                  class="btn btn-link text-dark text-decoration-none"
                  [routerLink]="['post', slugify(n.title), n.id]"
                >
                  <fa-icon [icon]="['fas', 'book-open']"></fa-icon>
                </button>
                <button
                  class="btn btn-link text-dark text-decoration-none"
                  [routerLink]="['post', slugify(n.title), n.id, 'edit']"
                >
                  <fa-icon [icon]="['fas', 'edit']"></fa-icon>
                </button>
                <button class="btn btn-link text-dark text-decoration-none" (click)="delete(n)">
                  <fa-icon [icon]="['fas', 'trash']"></fa-icon>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-end">
        <ngb-pagination
          *ngIf="posts && posts.page.totalPages > 1"
          [page]="pageNumber"
          [pageSize]="posts.page.size"
          [maxSize]="5"
          [collectionSize]="posts.page.totalElements"
          (pageChange)="load($event)"
        ></ngb-pagination>
      </div>
    </ng-container>

    <ng-container *ngIf="!posts || posts.page.size === 0"><span class="mt-2 mb-2">No content.</span></ng-container>
  </div>
</div>
