<ng-template #fullScreenTemplate let-title="title">
  <div class="d-flex justify-content-end">
    <a class="btn btn-link m-0" [class.pt-3]="!fullScreen" (click)="$event.stopPropagation(); fullScreen = !fullScreen">
      <fa-icon class="text-dark" [icon]="['fas', 'expand-arrows-alt']"></fa-icon>
    </a>
  </div>
</ng-template>
<app-title title="Reports" [uppercase]="true"></app-title>
<ng-container *ngIf="user">
  <ul [activeId]="activeId" ngbNav #nav="ngbNav" class="nav-tabs">
    <li ngbNavItem="home">
      <a ngbNavLink routerLink="/report/home">Search</a>
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'Reports' }"
          ></ng-component>
          <div class="d-block" *ngIf="user">
            <app-posts />
          </div>
        </div>
      </ng-template>
    </li>

    <li ngbNavItem="bookmarks">
      <a ngbNavLink routerLink="/report/bookmarks"
        ><fa-icon [classList]="'text-warning'" [icon]="['fas', 'star']" />Bookmarks</a
      >
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'Bookmarks' }"
          ></ng-component>

          <div class="d-block" *ngIf="user">
            <app-posts [bookmarked]="true" />
          </div>
        </div>
      </ng-template>
    </li>

    <li ngbNavItem="drafts">
      <a ngbNavLink routerLink="/report/drafts"
        >üìù Draft
        <span
          *ngIf="unreadCounters"
          class="badge rounded-4 align-middle"
          [class.text-muted]="getCounterForStatus('DRAFT') === 0"
          [class.bg-light]="getCounterForStatus('DRAFT') === 0"
          [class.bg-danger]="getCounterForStatus('DRAFT') > 0"
        >
          {{ getCounterForStatus('DRAFT') }}
        </span></a
      >
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'Draft' }"
          ></ng-component>

          <div class="d-block" *ngIf="user">
            <app-posts [disableStatusFilter]="true" statusFilter="DRAFT" />
          </div>
        </div>
      </ng-template>
    </li>
    <li ngbNavItem="in-progress">
      <a ngbNavLink routerLink="/report/in-progress"
        >‚è≥ In progress
        <span
          *ngIf="unreadCounters"
          class="badge rounded-4 align-middle"
          [class.text-muted]="getCounterForStatus('IN_PROGRESS') === 0"
          [class.bg-light]="getCounterForStatus('IN_PROGRESS') === 0"
          [class.bg-danger]="getCounterForStatus('IN_PROGRESS') > 0"
        >
          {{ getCounterForStatus('IN_PROGRESS') }}
        </span>
      </a>
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'IN_PROGRESS' }"
          ></ng-component>

          <div class="d-block" *ngIf="user">
            <app-posts [disableStatusFilter]="true" statusFilter="IN_PROGRESS" />
          </div>
        </div>
      </ng-template>
    </li>
    <li ngbNavItem="pending">
      <a ngbNavLink routerLink="/report/pending"
        >üïó Pending
        <span
          *ngIf="unreadCounters"
          class="badge rounded-4 align-middle"
          [class.text-muted]="getCounterForStatus('PENDING') === 0"
          [class.bg-light]="getCounterForStatus('PENDING') === 0"
          [class.bg-danger]="getCounterForStatus('PENDING') > 0"
        >
          {{ getCounterForStatus('PENDING') }}
        </span>
      </a>
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'Pending' }"
          ></ng-component>

          <div class="d-block" *ngIf="user">
            <app-posts [disableStatusFilter]="true" statusFilter="PENDING" />
          </div>
        </div>
      </ng-template>
    </li>

    <li ngbNavItem="done">
      <a ngbNavLink routerLink="/report/done"
        >‚úÖ Done
        <span
          *ngIf="unreadCounters"
          class="badge rounded-4 align-middle"
          [class.text-muted]="getCounterForStatus('DONE') === 0"
          [class.bg-light]="getCounterForStatus('DONE') === 0"
          [class.bg-danger]="getCounterForStatus('DONE') > 0"
        >
          {{ getCounterForStatus('DONE') }}
        </span></a
      >
      <ng-template ngbNavContent>
        <div [class.fullscreen]="fullScreen" [class.p-3]="fullScreen">
          <ng-component
            [ngTemplateOutlet]="fullScreenTemplate"
            [ngTemplateOutletContext]="{ title: 'Done' }"
          ></ng-component>

          <div class="d-block" *ngIf="user">
            <app-posts [disableStatusFilter]="true" statusFilter="DONE" />
          </div>
        </div>
      </ng-template>
    </li>
  </ul>
  <div [ngbNavOutlet]="nav"></div>
</ng-container>
