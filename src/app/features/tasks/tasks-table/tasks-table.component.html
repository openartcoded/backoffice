<app-title title="Tasks" [uppercase]="true"></app-title>
<ng-container *ngIf="filteredReminderTasks">
  <div class="d-flex justify-content-between pb-2 pt-1">
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="checkbox" id="toggleTask" [(ngModel)]="showTasks" (change)="toggleTask()">
      <label class="form-check-label" for="toggleTask">
        Show Actions&nbsp;
      </label>
      <input class="form-check-input" type="checkbox" id="toggleDisabled" [(ngModel)]="hideDisabled"
             (change)="toggleDisabled()">
      <label class="form-check-label" for="toggleDisabled">
        Hide Disabled
      </label>
    </div>
    <div ngbDropdown class="d-inline-block" container="body">
      <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle>
        <fa-icon icon="exclamation"></fa-icon>
        Actions
      </button>
      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
        <button ngbDropdownItem (click)="openTask()">
          <fa-icon [icon]="['fas','plus']"></fa-icon>
          New Task
        </button>
        <button ngbDropdownItem (click)="openCronExpressionHelp()">
          <fa-icon [icon]="['fas','question-circle']"></fa-icon>
          Cron Expression
        </button>
      </div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-sm table-bordered table-hover table-striped">
      <thead>
      <tr>
        <th>Title</th>
        <th class="fit">Next Date</th>
        <th class="fit d-md-table-cell d-none">Disabled</th>
        <th class="fit d-md-table-cell d-none">Has Action</th>
        <th class="fit d-md-table-cell">Results</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td *ngIf="!filteredReminderTasks.length" colspan="5">No entries</td>
      </tr>
      <ng-container *ngFor="let task of filteredReminderTasks">
        <tr role="button" (click)="openTask(task)">
          <td>{{task.title}}</td>
          <td>{{task?.nextDate | date: 'dd/MM/yyyy HH:mm'}}</td>
          <td class="text-center d-md-table-cell d-none"><input aria-label="disabled" type="checkbox"
                                                                [checked]="task.disabled"
                                                                [disabled]="true"></td>
          <td class="text-center d-md-table-cell d-none"><input aria-label="disabled" type="checkbox"
                                                                [checked]="task.actionKey"
                                                                [disabled]="true"></td>
          <td class="text-center d-md-table-cell">
            <button class="btn btn-link text-secondary" *ngIf="task.actionKey" (click)="openActionResult(task, $event)"><fa-icon [icon]="['fas','eye']"></fa-icon></button>
          </td>
        </tr>
      </ng-container>
      </tbody>
    </table>
  </div>

</ng-container>
